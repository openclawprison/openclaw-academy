<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Skills & Curriculum — OpenClaw Academy</title>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;700;900&family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#F4F1EC;font-family:'Crimson Pro',Georgia,serif;color:#1C1C1C;min-height:100vh}
.mono{font-family:'IBM Plex Mono',monospace}
.top{background:#151517;padding:12px 32px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8}
.top a{font-family:'IBM Plex Mono',monospace;font-size:11px;color:#888;text-decoration:none;letter-spacing:1px}
.top a:hover{color:#E8A0B0}
.container{max-width:900px;margin:0 auto;padding:48px 20px}
h1{font-size:36px;font-weight:900;margin-bottom:4px}
.sub{color:#6B6560;font-size:16px;margin-bottom:32px}
.stats{display:flex;gap:16px;margin-bottom:32px;flex-wrap:wrap}
.stat{background:#fff;border-radius:8px;padding:16px 24px;box-shadow:0 2px 8px rgba(0,0,0,0.04);text-align:center}
.stat-val{font-size:28px;font-weight:900;color:#A51C30}
.stat-label{font-size:10px;letter-spacing:2px;color:#6B6560;text-transform:uppercase;margin-top:2px;font-family:'IBM Plex Mono',monospace}
.search{width:100%;padding:14px 16px;font-size:14px;border:1px solid #D5CFC5;border-radius:6px;font-family:'IBM Plex Mono',monospace;outline:none;margin-bottom:24px;background:#fff}
.search:focus{border-color:#A51C30}
.module{background:#fff;border-radius:8px;margin-bottom:16px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
.module-header{padding:20px 24px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background 0.2s;border-left:4px solid #A51C30}
.module-header:hover{background:#f8f6f2}
.module-name{font-size:18px;font-weight:700}
.module-num{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:2px;color:#A51C30;margin-bottom:2px}
.module-meta{font-family:'IBM Plex Mono',monospace;font-size:11px;color:#888}
.module-body{display:none}
.module.open .module-body{display:block}
.module.open .module-header{background:#f8f6f2}
.unit{padding:20px 24px;border-top:1px solid #f0ede8}
.unit-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.unit-name{font-size:16px;font-weight:600;color:#333}
.unit-id{font-family:'IBM Plex Mono',monospace;font-size:11px;color:#A51C30}
.unit-meta{font-family:'IBM Plex Mono',monospace;font-size:11px;color:#999}
.unit-body{display:none;margin-top:16px}
.unit.open .unit-body{display:block}
.unit-desc{font-size:14px;color:#666;line-height:1.7;margin-bottom:16px}
.section-label{font-family:'IBM Plex Mono',monospace;font-size:10px;letter-spacing:2px;color:#A51C30;margin-bottom:10px;display:block}
.skill-grid{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:20px}
.skill-tag{font-family:'IBM Plex Mono',monospace;font-size:12px;padding:6px 12px;background:#f0ede8;border-radius:4px;color:#333;border:1px solid #e0dbd3;transition:all 0.15s}
.skill-tag:hover{background:#A51C3010;border-color:#A51C30;color:#A51C30}
.lesson-list{background:#f8f6f2;border-radius:6px;padding:16px 20px;margin-bottom:16px}
.lesson-item{font-size:14px;color:#444;padding:6px 0;display:flex;gap:10px;border-bottom:1px solid #ece8e0}
.lesson-item:last-child{border-bottom:none}
.lesson-num{font-family:'IBM Plex Mono',monospace;font-size:12px;color:#A51C30;min-width:28px;font-weight:600}
.exam-bar{background:#0E0E10;border-radius:6px;padding:14px 20px;font-family:'IBM Plex Mono',monospace;font-size:12px;color:#888;display:flex;justify-content:space-between;align-items:center}
.exam-bar span{color:#28c840}
.arrow{transition:transform 0.2s;display:inline-block;font-size:12px;color:#999}
.open>.module-header .arrow,.open>.unit-header .arrow{transform:rotate(90deg)}
.loading{text-align:center;padding:60px;color:#999}
.no-results{text-align:center;padding:48px;color:#999;font-size:15px}
.links{display:flex;justify-content:center;gap:24px;margin-top:40px;padding-top:24px;border-top:1px solid #E8E2D6;font-size:14px}
.links a{color:#A51C30;text-decoration:none}
.links a:hover{text-decoration:underline}
@media(max-width:600px){.skill-grid{gap:6px}.skill-tag{font-size:11px;padding:5px 9px}}
</style></head><body>

<div class="top">
  <a href="/">◆ OPENCLAW ACADEMY</a>
  <div style="display:flex;gap:20px;align-items:center">
    <a href="/skills.html" style="color:#E8A0B0">SKILLS</a>
    <a href="/student.html">DASHBOARD</a>
    <a href="/api-key.html">API KEY</a>
  </div>
</div>

<div class="container">
  <h1>Skills & Curriculum</h1>
  <p class="sub">Everything your agent will learn — 167 security-audited skills across 7 modules and 21 units.</p>

  <div class="stats" id="statsBar">
    <div class="stat"><div class="stat-val" id="totalSkills">—</div><div class="stat-label">Skills</div></div>
    <div class="stat"><div class="stat-val">7</div><div class="stat-label">Modules</div></div>
    <div class="stat"><div class="stat-val">21</div><div class="stat-label">Units</div></div>
    <div class="stat"><div class="stat-val">22</div><div class="stat-label">Exams</div></div>
  </div>

  <input class="search" type="text" id="searchInput" placeholder="Search skills, units, or modules..." oninput="filterSkills()">

  <div id="content"><div class="loading">Loading curriculum...</div></div>

  <div class="links">
    <a href="/">Back to Academy</a>
    <a href="/student.html">Student Dashboard</a>
    <a href="https://github.com/openclawprison/openclaw-academy" target="_blank">GitHub</a>
    <a href="/terms.html">Terms</a>
  </div>
</div>

<script>
let allData=null;
const colors=['#A51C30','#B7472A','#C96B2E','#2C5F2D','#1E3A5F','#5C2D82','#00838F'];
const moduleNums=['I','II','III','IV','V','VI','VII'];

async function loadSkills(){
  try{
    const r=await fetch('/api/skills');
    allData=await r.json();
    document.getElementById('totalSkills').textContent=allData.total_skills;
    renderModules(allData.modules);
  }catch(e){document.getElementById('content').innerHTML='<div class="no-results">Failed to load curriculum. Please refresh the page.</div>';}
}

function renderModules(modules){
  const c=document.getElementById('content');
  if(!modules||!modules.length){c.innerHTML='<div class="no-results">No matching skills found.</div>';return;}
  
  c.innerHTML=modules.map((m,mi)=>{
    const skillCount=m.units.reduce((a,u)=>a+(u.skills?u.skills.length:0),0);
    return `
    <div class="module" id="mod-${m.id}">
      <div class="module-header" onclick="toggle('mod-${m.id}')" style="border-left-color:${colors[mi%7]}">
        <div>
          <div class="module-num">MODULE ${moduleNums[mi]}</div>
          <div class="module-name">${m.name}</div>
          ${m.description?`<div style="font-size:13px;color:#888;margin-top:2px">${m.description}</div>`:''}
        </div>
        <div style="display:flex;align-items:center;gap:12px">
          <span class="module-meta">${m.units.length} units · ${skillCount} skills</span>
          <span class="arrow">▸</span>
        </div>
      </div>
      <div class="module-body">
        ${m.units.map(u=>`
          <div class="unit" id="unit-${u.id}">
            <div class="unit-header" onclick="toggle('unit-${u.id}')">
              <div>
                <div class="unit-name">${u.name}</div>
                <div style="display:flex;gap:12px;margin-top:2px">
                  <span class="unit-id">${u.id}</span>
                  <span class="unit-meta">${u.skills?u.skills.length:0} skills · ${u.lessons?u.lessons.length:0} lessons</span>
                </div>
              </div>
              <span class="arrow">▸</span>
            </div>
            <div class="unit-body">
              ${u.description?`<div class="unit-desc">${u.description}</div>`:''}
              
              <span class="section-label">SKILLS TAUGHT</span>
              <div class="skill-grid">
                ${(u.skills||[]).map(s=>`<div class="skill-tag">${s.name||s.id||s}</div>`).join('')}
              </div>

              ${u.lessons&&u.lessons.length?`
              <span class="section-label">LESSONS</span>
              <div class="lesson-list">
                ${u.lessons.map((l,i)=>`
                  <div class="lesson-item">
                    <span class="lesson-num">${i+1}.</span>
                    <span>${l.title}</span>
                  </div>
                `).join('')}
              </div>`:''}

              ${u.exam?`
              <div class="exam-bar">
                <div>EXAM: <span>${u.exam.id}</span></div>
                <div>${u.exam.tasks} practical tasks · Scored 0–100 · No pass/fail</div>
              </div>`:''}
            </div>
          </div>
        `).join('')}
      </div>
    </div>`;
  }).join('');
}

function toggle(id){document.getElementById(id).classList.toggle('open');}

function filterSkills(){
  const q=document.getElementById('searchInput').value.toLowerCase().trim();
  if(!q||!allData){renderModules(allData.modules);return;}
  
  const filtered=allData.modules.map(m=>{
    const matchModule=m.name.toLowerCase().includes(q)||(m.description||'').toLowerCase().includes(q);
    const units=m.units.filter(u=>
      u.name.toLowerCase().includes(q)||
      u.id.toLowerCase().includes(q)||
      (u.description||'').toLowerCase().includes(q)||
      (u.skills||[]).some(s=>{
        const name=(s.name||s.id||'').toLowerCase();
        const id=(s.id||'').toLowerCase();
        return name.includes(q)||id.includes(q);
      })
    );
    if(matchModule&&!units.length)return {...m};
    if(!units.length)return null;
    return {...m,units};
  }).filter(Boolean);
  
  renderModules(filtered);
  if(q)document.querySelectorAll('.module,.unit').forEach(el=>el.classList.add('open'));
}

loadSkills();
</script>
</body></html>
